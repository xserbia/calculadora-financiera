<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mapa de Etapas ‚Äì Gr√°fico + Pir√°mide</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet"/>

<style>
  :root{
    --primary:#3956E8; --secondary:#7459D9; --accent:#E8C239;
    --bg:#FAFBFF; --card:#ffffff; --ink:#0f172a; --muted:#64748b; --line:#e5e7eb;
    --shadow:0 12px 30px rgba(15,23,42,.08); --radius:18px;
    --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:"Nunito",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--ink)}
  .wrap{max-width:1120px;margin:26px auto;padding:0 16px}

  .top{
    display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;
    margin-bottom:14px;
  }
  h1{font-size:26px;margin:0}
  .sub{margin:6px 0 0;color:var(--muted);font-size:13px}

  .stagePicker{
    display:flex;gap:8px;flex-wrap:wrap;align-items:center;
    background:var(--card);border:1px solid var(--line);
    padding:10px;border-radius:14px;box-shadow:var(--shadow);
  }
  .stageBtn{
    border:1px solid var(--line);background:#fff;color:#111827;
    padding:8px 10px;border-radius:12px;cursor:pointer;font-weight:800;font-size:12px;
    transition:.16s ease;
  }
  .stageBtn.active{
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    color:#fff;border-color:transparent;
  }

  /* ====== LAYOUT ====== */
  .grid{
    display:grid;
    grid-template-columns: 340px 1fr;
    gap:14px;
    align-items:start;
  }
  @media (max-width: 980px){
    .grid{grid-template-columns:1fr}
  }

  .card{
    background:var(--card);border:1px solid var(--line);
    border-radius:var(--radius);box-shadow:var(--shadow);
    padding:16px;
  }

  /* ====== PYRAMID ====== */
  .pyrWrap{
    position:sticky; top:14px;
  }
  @media (max-width: 980px){
    .pyrWrap{position:relative; top:auto}
  }

  .pyrHead{
    display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;
    margin-bottom:10px;
  }
  .pill{
    display:inline-flex;align-items:center;gap:8px;
    padding:6px 10px;border-radius:999px;
    border:1px solid var(--line);background:#f5f7ff;
    font-weight:900;font-size:12px;
  }
  .dot{width:10px;height:10px;border-radius:999px;background:var(--primary)}
  .pyrSub{color:var(--muted);font-size:12px;margin:0}

  .pyramid{
    --w: 280px;
    width: min(var(--w), 100%);
    margin: 12px auto 6px;
    display:flex;
    flex-direction:column;
    gap:10px;
    padding-bottom:6px;
  }

  .pstep{
    position:relative;
    height:62px;
    margin:0 auto;
    border-radius:16px;
    border:1px solid var(--line);
    background:#f8fafc;
    overflow:hidden;
    box-shadow: 0 8px 18px rgba(15,23,42,.06);
    transition: transform .16s ease, box-shadow .16s ease, filter .16s ease, opacity .16s ease;
    opacity:.55;
    filter:saturate(.7);
  }
  .pstep::before{
    content:"";
    position:absolute;inset:0;
    background:linear-gradient(90deg, rgba(57,86,232,.10), rgba(116,89,217,.10));
    opacity:0;
    transition:.16s ease;
  }

  /* widths (top smaller, base larger) */
  .pstep.s5{width:54%}
  .pstep.s4{width:66%}
  .pstep.s3{width:78%}
  .pstep.s2{width:90%}
  .pstep.s1{width:100%}

  .pinner{
    height:100%;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding:12px 12px;
    position:relative;
    z-index:1;
  }
  .ptitle{
    display:flex;flex-direction:column;gap:2px;
    line-height:1.15;
  }
  .ptitle b{font-size:12px}
  .ptitle span{font-size:11px;color:#475569;font-weight:800;letter-spacing:.04em;text-transform:uppercase}
  .pnum{
    width:28px;height:28px;border-radius:12px;
    background:#EEF3FF;border:1px solid #D8E0FF;
    display:flex;align-items:center;justify-content:center;
    font-weight:900;color:#1e293b;font-size:12px;
    flex:0 0 auto;
  }

  /* active + done */
  .pstep.done{
    opacity:.85;
    filter:saturate(1);
  }
  .pstep.active{
    opacity:1;
    filter:saturate(1.05);
    transform: translateY(-1px);
    border-color: rgba(57,86,232,.35);
    box-shadow: 0 12px 26px rgba(57,86,232,.16);
  }
  .pstep.active::before{opacity:1}
  .pstep.active .pnum{
    background:linear-gradient(90deg,var(--primary),var(--secondary));
    border-color:transparent;
    color:#fff;
  }

  /* stage colors (optional tone per level) */
  .pstep.s1{background:#fff}
  .pstep.s2{background:#fff}
  .pstep.s3{background:#fff}
  .pstep.s4{background:#fff}
  .pstep.s5{background:#fff}

  .pLegend{
    display:flex;gap:8px;flex-wrap:wrap;justify-content:center;
    margin-top:8px;
  }
  .lg{
    font-size:11px;font-weight:900;color:#334155;
    display:inline-flex;align-items:center;gap:6px;
    border:1px solid var(--line);border-radius:999px;background:#fff;padding:5px 8px;
  }
  .lg i{width:10px;height:10px;border-radius:999px;display:inline-block}
  .lg .iDone{background:#a7f3d0}
  .lg .iAct{background:#c7d2fe}
  .lg .iOff{background:#e5e7eb}

  /* ====== CONTENT RIGHT ====== */
  .headerCard{
    display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap;
  }
  .stageTitle{font-size:18px;font-weight:900;margin:0 0 4px}
  .stageMini{color:var(--muted);font-size:13px;margin:0}

  .blockTitle{
    font-size:12px;letter-spacing:.08em;text-transform:uppercase;
    color:#334155;font-weight:900;margin:0 0 8px;
    display:flex;align-items:center;gap:8px;
  }
  .blockTitle::before{
    content:"";width:10px;height:10px;border-radius:3px;background:var(--accent);
  }

  .bigQuote{
    border:1px dashed var(--line);
    background:#F7F8FE;
    padding:12px;border-radius:14px;
    font-size:14px;line-height:1.5;color:#0f172a;
  }

  .list{margin:0;padding:0;list-style:none}
  .list li{
    display:flex;gap:10px;align-items:flex-start;
    padding:10px;border:1px solid var(--line);
    border-radius:14px;background:#fff;margin-bottom:10px;
  }
  .badge{
    flex:0 0 auto;
    display:inline-flex;align-items:center;justify-content:center;
    width:26px;height:26px;border-radius:10px;
    background:#EEF3FF;border:1px solid #D8E0FF;color:#1e293b;font-weight:900;
  }
  .liTitle{font-weight:900}
  .liText{color:#334155;font-size:13px;margin-top:2px;line-height:1.35}

  .kpiGrid{
    display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;
  }
  @media (max-width: 520px){
    .kpiGrid{grid-template-columns:1fr}
  }
  .kpi{
    border:1px solid var(--line);border-radius:14px;padding:10px;background:#fff;
  }
  .kpiTop{display:flex;align-items:center;justify-content:space-between;gap:10px}
  .kpiName{font-weight:900;font-size:13px}
  .kpiTag{
    font-size:11px;font-weight:900;padding:4px 8px;border-radius:999px;border:1px solid var(--line);
    background:#fafafa;color:#334155;
  }

  .meta{
    display:flex;gap:10px;align-items:flex-start;
    padding:10px;border:1px solid var(--line);
    border-radius:14px;background:#fff;margin-bottom:10px;
  }
  .sev{width:10px;height:10px;border-radius:999px;margin-top:6px}
  .sev.ok{background:var(--ok)}
  .sev.warn{background:var(--warn)}
  .sev.bad{background:var(--bad)}
  .meta b{display:block}
  .meta span{display:block;color:#334155;font-size:13px;margin-top:2px;line-height:1.35}
</style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1>Mapa de Etapas Financieras</h1>
        <p class="sub">Gr√°fico informativo por etapa. La pir√°mide a la izquierda se ilumina seg√∫n la etapa seleccionada.</p>
      </div>

      <div class="stagePicker" role="group" aria-label="Selector de etapa">
        <button class="stageBtn active" data-stage="1">Etapa 1</button>
        <button class="stageBtn" data-stage="2">Etapa 2</button>
        <button class="stageBtn" data-stage="3">Etapa 3</button>
        <button class="stageBtn" data-stage="4">Etapa 4</button>
        <button class="stageBtn" data-stage="5">Etapa 5</button>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: PYRAMID -->
      <div class="card pyrWrap">
        <div class="pyrHead">
          <div class="pill"><span class="dot" id="stageDot"></span><span id="stagePill">ETAPA 1 ¬∑ SUPERVIVENCIA</span></div>
        </div>
        <p class="pyrSub">Avanzas de base (Supervivencia) hacia la cima (Libertad).</p>

        <div class="pyramid" aria-label="Pir√°mide de etapas">
          <!-- Top -->
          <div class="pstep s5" data-step="5" title="Etapa 5">
            <div class="pinner">
              <div class="ptitle"><b>üü¶ Libertad</b><span>Etapa 5</span></div>
              <div class="pnum">5</div>
            </div>
          </div>
          <div class="pstep s4" data-step="4" title="Etapa 4">
            <div class="pinner">
              <div class="ptitle"><b>üü© Independencia</b><span>Etapa 4</span></div>
              <div class="pnum">4</div>
            </div>
          </div>
          <div class="pstep s3" data-step="3" title="Etapa 3">
            <div class="pinner">
              <div class="ptitle"><b>üí∞ Acumulaci√≥n</b><span>Etapa 3</span></div>
              <div class="pnum">3</div>
            </div>
          </div>
          <div class="pstep s2" data-step="2" title="Etapa 2">
            <div class="pinner">
              <div class="ptitle"><b>üõ°Ô∏è Seguridad</b><span>Etapa 2</span></div>
              <div class="pnum">2</div>
            </div>
          </div>
          <!-- Base -->
          <div class="pstep s1" data-step="1" title="Etapa 1">
            <div class="pinner">
              <div class="ptitle"><b>üÜò Supervivencia</b><span>Etapa 1</span></div>
              <div class="pnum">1</div>
            </div>
          </div>
        </div>

        <div class="pLegend" aria-label="Leyenda">
          <span class="lg"><i class="iOff"></i>Inactivo</span>
          <span class="lg"><i class="iDone"></i>Completado</span>
          <span class="lg"><i class="iAct"></i>Actual</span>
        </div>
      </div>

      <!-- RIGHT: DETAILS -->
      <div class="card">
        <div class="headerCard">
          <div>
            <h2 class="stageTitle" id="stageTitle">üÜò Supervivencia</h2>
            <p class="stageMini" id="stageMini">Cuando lo urgente es estabilizar y dejar de usar deuda para vivir.</p>
          </div>
        </div>

        <div style="margin-top:14px">
          <div class="blockTitle">Prop√≥sito</div>
          <div class="bigQuote" id="purpose">Recuperar control y cubrir necesidades b√°sicas sin usar deuda.</div>
        </div>

        <div style="margin-top:12px">
          <div class="blockTitle">Mentalidad</div>
          <div class="bigQuote" id="mindset">‚ÄúPrimero estabilizo el flujo y dejo de hundirme.‚Äù</div>
        </div>

        <div style="margin-top:12px">
          <div class="blockTitle">Principales objetivos</div>
          <ul class="list" id="goals"></ul>
        </div>

        <div style="margin-top:14px">
          <div class="blockTitle">Indicadores clave (KPI)</div>
          <div class="kpiGrid" id="kpis"></div>
        </div>

        <div style="margin-top:14px">
          <div class="blockTitle">Umbrales / Metas</div>
          <div id="metas"></div>
        </div>
      </div>
    </div>
  </div>

<script>
  const STAGES = {
    1: {
      pill: "ETAPA 1 ¬∑ SUPERVIVENCIA",
      title: "üÜò Supervivencia",
      mini: "Cuando lo urgente es estabilizar y dejar de usar deuda para vivir.",
      purpose: "Recuperar control y cubrir necesidades b√°sicas sin usar deuda.",
      mindset: "‚ÄúPrimero estabilizo el flujo y dejo de hundirme.‚Äù",
      goals: [
        {t:"Asegurar ingreso estable", d:"Garantizar flujo m√≠nimo para cubrir lo esencial sin depender de cr√©dito."},
        {t:"Cubrir esenciales sin cr√©dito", d:"Eliminar el uso de tarjetas/pr√©stamos para gastos b√°sicos."},
        {t:"Crear mini reserva", d:"Construir una reserva inicial de emergencia para no caer en deuda por imprevistos."},
        {t:"Documentar tu realidad", d:"Registrar ingresos, gastos y deudas para tomar decisiones con datos."},
      ],
      kpis: [
        {n:"Reserva (meses)", tag:"Liquidez"},
        {n:"DTI (deuda/ingreso)", tag:"Deuda"},
        {n:"Cash-flow ratio", tag:"Flujo"},
      ],
      metas: [
        {sev:"bad", b:"Ingreso/Gasto ‚â• 1.0√ó", s:"Tu ingreso debe cubrir el gasto total (si no, est√°s en d√©ficit)."},
        {sev:"warn", b:"Reserva ‚â• 1 mes", s:"Primer objetivo: 1 mes de esenciales (aunque sea poco a poco)."},
        {sev:"bad", b:"DTI ‚â§ 50%", s:"Si es mayor, hay alta presi√≥n financiera: recortar + renegociar + aumentar ingreso."},
      ]
    },
    2: {
      pill: "ETAPA 2 ¬∑ SEGURIDAD",
      title: "üõ°Ô∏è Seguridad",
      mini: "Construyes estabilidad y protecci√≥n ante imprevistos.",
      purpose: "Construir estabilidad financiera y protecci√≥n ante eventos inesperados.",
      mindset: "‚ÄúProtejo mi base: reservas, deudas bajo control y h√°bitos consistentes.‚Äù",
      goals: [
        {t:"Elevar reserva", d:"Construir 6‚Äì12 meses de gastos esenciales."},
        {t:"Bajar DTI", d:"Reducir servicio de deuda a un nivel saludable."},
        {t:"Reducir pasivos/activos", d:"Evitar apalancamiento excesivo y ganar estabilidad."},
        {t:"Mejorar control", d:"Mantener presupuesto, seguimiento y disciplina mensual."},
      ],
      kpis: [
        {n:"Reserva (meses)", tag:"Liquidez"},
        {n:"DTI (deuda/ingreso)", tag:"Deuda"},
        {n:"Pasivos/Activos", tag:"Riesgo"},
        {n:"Control (0‚Äì100)", tag:"H√°bitos"},
      ],
      metas: [
        {sev:"warn", b:"Reserva ‚â• 6‚Äì12 meses", s:"Meta est√°ndar para resiliencia (ajusta por familia/estabilidad)."},
        {sev:"bad", b:"DTI ‚â§ 36%", s:"Si est√°s por encima, prioriza reducci√≥n de deuda."},
        {sev:"warn", b:"Pasivos/Activos < 50%", s:"Por encima de 50%: exceso de apalancamiento."},
        {sev:"warn", b:"Control ‚â• 40/100", s:"Sin control, la estabilidad es fr√°gil."},
      ]
    },
    3: {
      pill: "ETAPA 3 ¬∑ ACUMULACI√ìN",
      title: "üí∞ Acumulaci√≥n",
      mini: "El foco es crecer patrimonio de manera consistente.",
      purpose: "Hacer crecer patrimonio y construir activos productivos.",
      mindset: "‚ÄúAhorro alto, invierto con intenci√≥n y construyo activos.‚Äù",
      goals: [
        {t:"Ahorro constante", d:"Mantener ahorro/inversi√≥n mensual con disciplina."},
        {t:"Construir patrimonio", d:"Avanzar hacia 7‚Äì14√ó de patrimonio vs ingreso anual neto."},
        {t:"Mantener deudas saludables", d:"DTI bajo y pasivos/activos controlados."},
        {t:"Optimizar decisiones", d:"Mejorar retorno, costos y eficiencia financiera."},
      ],
      kpis: [
        {n:"Tasa de ahorro", tag:"Ahorro"},
        {n:"Patrimonio/Ingreso (√ó)", tag:"Patrimonio"},
        {n:"DTI", tag:"Deuda"},
        {n:"Reserva (meses)", tag:"Liquidez"},
      ],
      metas: [
        {sev:"warn", b:"Ahorro ‚â• 15%", s:"De 15% a 29%: aceptable. Ideal: ‚â• 30%."},
        {sev:"warn", b:"Patrimonio 7‚Äì14√ó", s:"Rango t√≠pico de acumulaci√≥n (depende de edad/objetivos)."},
        {sev:"warn", b:"DTI ‚â§ 36% y P/A < 50%", s:"Mantener estabilidad mientras creces."},
      ]
    },
    4: {
      pill: "ETAPA 4 ¬∑ INDEPENDENCIA",
      title: "üü© Independencia",
      mini: "Tus ingresos pasivos empiezan a sostener tu estilo de vida.",
      purpose: "Sostener estilo de vida sin depender del ingreso activo.",
      mindset: "‚ÄúMi dinero me paga la vida.‚Äù",
      goals: [
        {t:"Ingresos pasivos suficientes", d:"Alcanzar pasivo/gasto ‚â• 1.0√ó o alto patrimonio relativo."},
        {t:"Retiros sostenibles", d:"Mantener retiro anual dentro de l√≠mites razonables."},
        {t:"Blindaje de riesgo", d:"Apalancamiento bajo, alta liquidez, diversificaci√≥n."},
        {t:"Dise√±o de vida", d:"Optimizar trabajo por elecci√≥n, no por obligaci√≥n."},
      ],
      kpis: [
        {n:"Pasivo/Gasto (√ó)", tag:"Independencia"},
        {n:"Patrimonio/Ingreso (√ó)", tag:"Patrimonio"},
        {n:"Retiros (%)", tag:"SWR"},
        {n:"Pasivos/Activos", tag:"Riesgo"},
      ],
      metas: [
        {sev:"warn", b:"Pasivo/Gasto ‚â• 1.0√ó", s:"Tu pasivo cubre el gasto anual total."},
        {sev:"warn", b:"Retiros ~3‚Äì4%", s:"Rango referencial (ajusta por edad/horizonte)."},
        {sev:"warn", b:"Pasivos/Activos ‚â§ 30%", s:"Menos deuda = m√°s resiliencia."},
      ]
    },
    5: {
      pill: "ETAPA 5 ¬∑ LIBERTAD",
      title: "üü¶ Libertad",
      mini: "Riqueza, legado y decisiones guiadas por prop√≥sito.",
      purpose: "Mantener riqueza, proteger legado y vivir con libertad de tiempo.",
      mindset: "‚ÄúMultiplico, protejo y transfiero mi legado.‚Äù",
      goals: [
        {t:"Pasivo excede gasto", d:"Mantener pasivo/gasto ‚â• 1.2√ó."},
        {t:"Protecci√≥n y estructura", d:"Planificaci√≥n patrimonial, seguros, impuestos, diversificaci√≥n."},
        {t:"Bajo apalancamiento", d:"Deuda m√≠nima para reducir fragilidad."},
        {t:"Legado y prop√≥sito", d:"Transferencia, filantrop√≠a y decisiones estrat√©gicas."},
      ],
      kpis: [
        {n:"Pasivo/Gasto (√ó)", tag:"Libertad"},
        {n:"Retiros (%)", tag:"SWR"},
        {n:"Reserva (meses)", tag:"Resiliencia"},
        {n:"Pasivos/Activos", tag:"Riesgo"},
      ],
      metas: [
        {sev:"ok", b:"Pasivo/Gasto ‚â• 1.2√ó", s:"Excedente para reinvertir y proteger estilo de vida."},
        {sev:"warn", b:"Retiros ‚â§ 3‚Äì3.5%", s:"M√°s conservador para horizonte largo."},
        {sev:"ok", b:"Pasivos/Activos ‚â§ 10%", s:"Deuda m√≠nima: resiliencia m√°xima."},
      ]
    }
  };

  const stageBtns = document.querySelectorAll('.stageBtn');

  function paintPyramid(stage){
    // Regla:
    // - "active" = etapa actual
    // - "done" = etapas anteriores (1..stage-1)
    // Nota: en la pir√°mide visual est√° de arriba (5) a abajo (1),
    // pero la l√≥gica es num√©rica por data-step.
    document.querySelectorAll('.pstep').forEach(el=>{
      const n = +el.getAttribute('data-step');
      el.classList.remove('active','done');
      if(n < stage) el.classList.add('done');
      if(n === stage) el.classList.add('active');
    });

    // dot color simple (opcional)
    const dot = document.getElementById('stageDot');
    dot.style.background = stage===1 ? "#ef4444" :
                           stage===2 ? "#f59e0b" :
                           stage===3 ? "#e8c239" :
                           stage===4 ? "#3956E8" : "#7459D9";
  }

  function render(stage){
    const s = STAGES[stage];

    // Left pill
    document.getElementById('stagePill').textContent = s.pill;

    // Right header
    document.getElementById('stageTitle').textContent = s.title;
    document.getElementById('stageMini').textContent = s.mini;

    // Purpose / mindset
    document.getElementById('purpose').textContent = s.purpose;
    document.getElementById('mindset').textContent = s.mindset;

    // Goals
    const goals = document.getElementById('goals');
    goals.innerHTML = s.goals.map((g, i)=>`
      <li>
        <div class="badge">${i+1}</div>
        <div>
          <div class="liTitle">${g.t}</div>
          <div class="liText">${g.d}</div>
        </div>
      </li>
    `).join('');

    // KPIs
    const kpis = document.getElementById('kpis');
    kpis.innerHTML = s.kpis.map(k=>`
      <div class="kpi">
        <div class="kpiTop">
          <div class="kpiName">${k.n}</div>
          <div class="kpiTag">${k.tag}</div>
        </div>
      </div>
    `).join('');

    // Metas
    const metas = document.getElementById('metas');
    metas.innerHTML = s.metas.map(m=>`
      <div class="meta">
        <div class="sev ${m.sev}"></div>
        <div>
          <b>${m.b}</b>
          <span>${m.s}</span>
        </div>
      </div>
    `).join('');

    // Pyramid highlight
    paintPyramid(stage);
  }

  // Buttons
  stageBtns.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      stageBtns.forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      render(+btn.dataset.stage);
    });
  });

  // Click pyramid to select stage (optional nice UX)
  document.querySelectorAll('.pstep').forEach(el=>{
    el.addEventListener('click', ()=>{
      const stage = +el.getAttribute('data-step');
      stageBtns.forEach(b=>b.classList.toggle('active', +b.dataset.stage === stage));
      render(stage);
    });
  });

  render(1);
</script>
</body>
</html>
